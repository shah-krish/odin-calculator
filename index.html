<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Calculator</title>
</head>
<body>
    <div class = "wrapper">
        <div class = "container">
            
            <div class = "wrapper2">

                <div class = "display">
                    <p class = "text">  </p>
                </div>

                <!-- <div class = "keys"> -->

                <div class="row1">
                    <button class="btn" data-value="AC">AC</button>
                    <!-- <button class="btn" data-value="+/-">+/-</button> -->
                    <!-- <button class="btn" data-value="%">%</button> -->
                    <button class="btn" data-value="Del">Del</button>
                </div>
                
                <div class="row2">
                    <button class="btn" data-value="7">7</button>
                    <button class="btn" data-value="8">8</button>
                    <button class="btn" data-value="9">9</button>
                    <button class="btn" data-value="*">*</button>
                </div>
                
                <div class="row3">
                    <button class="btn" data-value="4">4</button>
                    <button class="btn" data-value="5">5</button>
                    <button class="btn" data-value="6">6</button>
                    <button class="btn" data-value="-">-</button>
                </div>
                
                <div class="row4">
                    <button class="btn" data-value="1">1</button>
                    <button class="btn" data-value="2">2</button>
                    <button class="btn" data-value="3">3</button>
                    <button class="btn" data-value="+">+</button>
                </div>
                
                <div class="row5">
                    <button class="btn" data-value="=">=</button>
                    <button class="btn" data-value="0">0</button>
                    <button class="btn" data-value=".">.</button>
                    <button class="btn" data-value="/">/</button>
                </div>

                <!-- </div> -->

            </div>

        </div>
    </div>  


    <script>

        function add(num1, num2){
            return num1 + num2; 
        }
        function subtract(num1, num2){
            return num1 - num2;
        }
        function multiply(num1, num2){
            return num1*num2;
        }
        function divide(num1, num2){
            return num1/num2;
        }
        function operation(str, num1, num2){
            var a = 0;
            if(str == "+"){
                a = add(num1, num2);
            }
            else if(str == "-"){
                a = subtract(num1, num2);
            }
            else if(str == "*"){
                a = multiply(num1, num2);
            }
            else{
                a = divide(num1, num2);
            }
            return a;
        }

        var btn = document.getElementById("button");
        var num1 = "";
        var num2 = "";
        var ansOnScreen = false;
        let currentOp = null;
        let waitingForNextNum = false;

        const buttons = document.querySelectorAll('.btn');

        buttons.forEach(button => {

            button.onclick = function() {
                const value = this.getAttribute('data-value');
        const display = document.querySelector('.text');

        if (value === 'AC') {
            display.textContent = "";
            num1 = null;
            currentOp = null;
            ansOnScreen = false;
            waitingForNextNum = false;
        } 
        else if (value === 'Del') {
            display.textContent = display.textContent.slice(0, -1);
        } 
        else if (/^[0-9.]$/.test(value)) {
            if (ansOnScreen || waitingForNextNum) {
                display.textContent = value;
                ansOnScreen = false;
                waitingForNextNum = false;
            } else {
                display.textContent += value;
            }
        } 
        else if (['+', '-', '*', '/'].includes(value)) {
            if (num1 !== null && currentOp !== null && !waitingForNextNum) {
                const num2 = parseFloat(display.textContent);
                num1 = operation(currentOp, num1, num2);
                display.textContent = num1 + value;
            } else {
                num1 = parseFloat(display.textContent);
                display.textContent = num1 + value;
            }
            currentOp = value;
            waitingForNextNum = true;
        } 
        else if (value === '=') {
            if (num1 !== null && currentOp !== null && !waitingForNextNum) {
                const num2 = parseFloat(display.textContent);
                const result = operation(currentOp, num1, num2);
                display.textContent = result;
                num1 = null;
                currentOp = null;
                ansOnScreen = true;
            }
        }
        else if (value == "%") {
            let str = display.textContent;
            const match = str.match(/(\d+\.?\d*)$/);
            if (match) {
                const num = parseFloat(match[0]);
                const percent = num / 100;
                display.textContent = str.slice(0, -match[0].length) + percent;
            }
}
    };
});

    </script>
</body>
</html>